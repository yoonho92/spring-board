<html>
<head>
    <script th:inline="javascript">
        function editPost(){
            let formData = new FormData(document.getElementById('formForEdit'));
            let formDataObject ={};
            formData.forEach(((value, key) => formDataObject[key] = value))
            fetch("http://localhost:8080/board/[[${post.id}]]/edit", {
                headers: {
                    "Content-Type":"application/json"
                },
                method: 'PATCH',
                body: JSON.stringify(formDataObject)
            })
                .then(response => response.json())
                .then(it => window.location.href="http://localhost:8080/board/" + it.id);
        }
    </script>
    <style>
        div#wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 850px;
            height: 500px;
            margin-left: -450px;
            margin-top: -250px;
            text-align: right;
        }
        div.innerDiv *{
            vertical-align: middle;
        }

    </style>
</head>
<body>
<div id="wrapper">
    <form name="formData" id="formForEdit">
        <input type="hidden" name="id" th:value="${post.id}">
        <input type="hidden" name="author" th:value="${post.author}">
        <div class="innerDiv" style="width: 850px">
            <label>제목</label>
            <input style="width: 800px" type="text" name="title" th:value="${post.title}">
        </div>
        <br>
        <br>
        <div class="innerDiv" style="width: 850px; height: 300px">
            <label for="content">내용</label>
            <textarea name="content" id="content" style="width: 800px;height: 300px; resize: none" th:text="${post.content}"></textarea>
        </div>
    </form>
    <div class="innerDiv">
        <button type="button" onclick="editPost()">확인</button>
        <button type="button" th:onclick="|location.href='/board/${post.id}'|">취소</button>
    </div>
</div>
<div>


</div>

</body>
</html>